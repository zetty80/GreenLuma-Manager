<Window
    x:Class="GreenLuma_Manager.Dialogs.SettingsDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Settings"
    Width="800"
    Height="718"
    MinWidth="720"
    MinHeight="600"
    Background="#FF1A1A1A"
    ResizeMode="CanResize"
    WindowStartupLocation="CenterOwner">
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="0" UseAeroCaptionButtons="False" />
    </WindowChrome.WindowChrome>
    <FrameworkElement.Resources>
        <ResourceDictionary>
            <SolidColorBrush x:Key="DarkBg" Color="#FF1A1A1A" />
            <SolidColorBrush x:Key="SurfaceBg" Color="#FF0F0F0F" />
            <SolidColorBrush x:Key="Border" Color="#FF2A2A2A" />
            <SolidColorBrush x:Key="Accent" Color="#FFFFFFFF" />
            <SolidColorBrush x:Key="Text" Color="#FFFFFFFF" />
            <SolidColorBrush x:Key="TextSecond" Color="#FFAAAAAA" />
            <SolidColorBrush x:Key="TextTert" Color="#FF666666" />
            <SolidColorBrush x:Key="Danger" Color="#FFFF4444" />
            <Style x:Key="HeaderTxt" TargetType="{x:Type TextBlock}">
                <Setter Property="FontSize" Value="12" />
                <Setter Property="FontWeight" Value="SemiBold" />
                <Setter Property="Foreground" Value="{StaticResource TextTert}" />
                <Setter Property="Margin" Value="0,0,0,8" />
            </Style>
            <Style x:Key="LabelTxt" TargetType="{x:Type TextBlock}">
                <Setter Property="FontSize" Value="13" />
                <Setter Property="Foreground" Value="{StaticResource TextSecond}" />
                <Setter Property="Margin" Value="0,0,0,8" />
            </Style>
            <Style x:Key="InputBox" TargetType="{x:Type TextBox}">
                <Setter Property="Background" Value="{StaticResource SurfaceBg}" />
                <Setter Property="Foreground" Value="{StaticResource Text}" />
                <Setter Property="BorderBrush" Value="{StaticResource Border}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Padding" Value="16,12" />
                <Setter Property="FontSize" Value="14" />
                <Setter Property="Height" Value="48" />
                <Setter Property="VerticalContentAlignment" Value="Center" />
                <Setter Property="CaretBrush" Value="{StaticResource Accent}" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type TextBox}">
                            <Border
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                                <ScrollViewer
                                    Name="PART_ContentHost"
                                    Margin="0"
                                    Padding="{TemplateBinding Padding}"
                                    Focusable="False"
                                    HorizontalScrollBarVisibility="Hidden"
                                    VerticalScrollBarVisibility="Hidden" />
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="UIElement.IsFocused" Value="True">
                                    <Setter Property="BorderBrush" Value="{StaticResource Accent}" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style x:Key="PrimaryBtn" TargetType="{x:Type Button}">
                <Setter Property="Background" Value="{StaticResource Accent}" />
                <Setter Property="Foreground" Value="{StaticResource DarkBg}" />
                <Setter Property="BorderThickness" Value="0" />
                <Setter Property="Height" Value="48" />
                <Setter Property="Padding" Value="28,0" />
                <Setter Property="FontSize" Value="13" />
                <Setter Property="FontWeight" Value="SemiBold" />
                <Setter Property="Cursor" Value="Hand" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Border
                                Padding="{TemplateBinding Padding}"
                                Background="{TemplateBinding Background}"
                                CornerRadius="8">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <Trigger Property="UIElement.IsMouseOver" Value="True">
                        <Setter Property="Background" Value="#FFDDDDDD" />
                    </Trigger>
                </Style.Triggers>
            </Style>
            <Style
                x:Key="SecondBtn"
                BasedOn="{StaticResource PrimaryBtn}"
                TargetType="{x:Type Button}">
                <Setter Property="Background" Value="{StaticResource SurfaceBg}" />
                <Setter Property="Foreground" Value="{StaticResource Text}" />
                <Setter Property="BorderBrush" Value="{StaticResource Border}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Border
                                Padding="{TemplateBinding Padding}"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <Trigger Property="UIElement.IsMouseOver" Value="True">
                        <Setter Property="Background" Value="#FF1E1E1E" />
                        <Setter Property="BorderBrush" Value="{StaticResource TextTert}" />
                    </Trigger>
                </Style.Triggers>
            </Style>
            <Style
                x:Key="DangerBtn"
                BasedOn="{StaticResource PrimaryBtn}"
                TargetType="{x:Type Button}">
                <Setter Property="Background" Value="{StaticResource Danger}" />
                <Setter Property="Foreground" Value="{StaticResource Text}" />
                <Setter Property="BorderBrush" Value="{StaticResource Danger}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Border
                                Padding="{TemplateBinding Padding}"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <Trigger Property="UIElement.IsMouseOver" Value="True">
                        <Setter Property="Background" Value="#FFCC3333" />
                        <Setter Property="BorderBrush" Value="#FFCC3333" />
                    </Trigger>
                </Style.Triggers>
            </Style>
            <Style TargetType="{x:Type CheckBox}">
                <Setter Property="Foreground" Value="{StaticResource TextSecond}" />
                <Setter Property="FontSize" Value="14" />
                <Setter Property="Padding" Value="12,0,0,0" />
                <Setter Property="VerticalContentAlignment" Value="Center" />
                <Setter Property="Cursor" Value="Hand" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type CheckBox}">
                            <Grid Background="#00FFFFFF">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Border
                                    Name="CheckBoxBorder"
                                    Width="24"
                                    Height="24"
                                    Background="{StaticResource SurfaceBg}"
                                    BorderBrush="{StaticResource Border}"
                                    BorderThickness="2"
                                    CornerRadius="6">
                                    <Path
                                        Name="CheckMark"
                                        Width="14"
                                        Height="14"
                                        Data="M20.285,2 L9,13.567 L3.7140000000000004,8.556000000000001 L4.440892098500626E-16,12.272000000000002 L9,21 L24,5.715"
                                        Fill="{StaticResource Accent}"
                                        Stretch="Uniform"
                                        Visibility="Collapsed" />
                                </Border>
                                <ContentPresenter
                                    Grid.Column="1"
                                    Margin="{TemplateBinding Padding}"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                            </Grid>
                            <ControlTemplate.Triggers>
                                <Trigger Property="ToggleButton.IsChecked" Value="True">
                                    <Setter TargetName="CheckMark" Property="Visibility" Value="Visible" />
                                </Trigger>
                                <Trigger Property="UIElement.IsMouseOver" Value="True">
                                    <Setter TargetName="CheckBoxBorder" Property="BorderBrush"
                                            Value="{StaticResource TextTert}" />
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter Property="UIElement.Opacity" Value="0.5" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
            <Style TargetType="{x:Type ToolTip}">
                <Setter Property="Background" Value="{StaticResource SurfaceBg}" />
                <Setter Property="Foreground" Value="{StaticResource Text}" />
                <Setter Property="BorderBrush" Value="{StaticResource Border}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Padding" Value="12,8" />
                <Setter Property="FontSize" Value="12" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ToolTip}">
                            <Border
                                Padding="{TemplateBinding Padding}"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                                <ContentPresenter />
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ResourceDictionary>
    </FrameworkElement.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="60" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Border
            Grid.Row="0"
            Background="{StaticResource DarkBg}"
            BorderBrush="{StaticResource Border}"
            BorderThickness="0,0,0,1"
            CornerRadius="12,12,0,0"
            MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
            <Grid Margin="30,0,20,0">
                <TextBlock
                    VerticalAlignment="Center"
                    FontSize="18"
                    FontWeight="SemiBold"
                    Foreground="{StaticResource Text}"
                    Text="Settings" />
                <Button
                    Width="36"
                    Height="36"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Background="#00FFFFFF"
                    BorderThickness="0"
                    Click="Cancel_Click"
                    Cursor="Hand"
                    ToolTip="Close"
                    WindowChrome.IsHitTestVisibleInChrome="True">
                    <Path
                        Name="CloseIcon"
                        Width="14"
                        Height="14"
                        Data="M19,6.41 L17.59,5 L12,10.59 L6.41,5 L5,6.41 L10.59,12 L5,17.59 L6.41,19 L12,13.41 L17.59,19 L19,17.59 L13.41,12 L19,6.41"
                        Fill="{StaticResource TextSecond}"
                        IsHitTestVisible="False"
                        Stretch="Uniform" />
                    <Control.Template>
                        <ControlTemplate TargetType="{x:Type Button}">
                            <Border
                                Padding="11"
                                Background="{TemplateBinding Background}"
                                CornerRadius="8">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                            </Border>
                        </ControlTemplate>
                    </Control.Template>
                    <FrameworkElement.Style>
                        <Style TargetType="{x:Type Button}">
                            <Setter Property="Background" Value="#00FFFFFF" />
                            <Style.Triggers>
                                <Trigger Property="UIElement.IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#FF3A3A3A" />
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter Property="Background" Value="#FF4A4A4A" />
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </FrameworkElement.Style>
                </Button>
            </Grid>
        </Border>
        <ScrollViewer
            Grid.Row="1"
            Margin="30,20,30,0"
            VerticalScrollBarVisibility="Hidden">
            <StackPanel Margin="0,0,0,30">
                <Border
                    Margin="0,0,0,16"
                    Padding="24"
                    Background="{StaticResource SurfaceBg}"
                    BorderBrush="{StaticResource Border}"
                    BorderThickness="1"
                    CornerRadius="12">
                    <UIElement.Effect>
                        <DropShadowEffect
                            BlurRadius="8"
                            Direction="270"
                            Opacity="0.15"
                            ShadowDepth="2"
                            Color="Black" />
                    </UIElement.Effect>
                    <StackPanel>
                        <TextBlock Style="{StaticResource HeaderTxt}" Text="PATHS" />
                        <TextBlock Style="{StaticResource LabelTxt}" Text="Steam Path" />
                        <Grid Margin="0,0,0,16">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="12" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBox Name="TxtSteamPath" Style="{StaticResource InputBox}" />
                            <Button
                                Grid.Column="2"
                                Width="120"
                                Click="BrowseSteam_Click"
                                Content="BROWSE"
                                Style="{StaticResource SecondBtn}" />
                        </Grid>
                        <TextBlock Style="{StaticResource LabelTxt}" Text="GreenLuma Path" />
                        <Grid Margin="0,0,0,4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="12" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBox Name="TxtGreenLumaPath" Style="{StaticResource InputBox}" />
                            <Button
                                Grid.Column="2"
                                Width="120"
                                Click="BrowseGreenLuma_Click"
                                Content="BROWSE"
                                Style="{StaticResource SecondBtn}" />
                        </Grid>
                    </StackPanel>
                </Border>
                <Border
                    Margin="0,0,0,16"
                    Padding="24"
                    Background="{StaticResource SurfaceBg}"
                    BorderBrush="{StaticResource Border}"
                    BorderThickness="1"
                    CornerRadius="12">
                    <UIElement.Effect>
                        <DropShadowEffect
                            BlurRadius="8"
                            Direction="270"
                            Opacity="0.15"
                            ShadowDepth="2"
                            Color="Black" />
                    </UIElement.Effect>
                    <StackPanel>
                        <TextBlock Style="{StaticResource HeaderTxt}" Text="LAUNCH OPTIONS" />
                        <CheckBox
                            Name="ChkReplaceSteamAutostart"
                            Margin="0,0,0,16"
                            Content="Replace Steam Autostart with GreenLuma" />
                        <TextBlock
                            Margin="0,8,0,8"
                            Style="{StaticResource HeaderTxt}"
                            Text="UPDATE SETTINGS" />
                        <CheckBox
                            Name="ChkDisableUpdateCheck"
                            Margin="0,0,0,12"
                            Checked="DisableUpdateCheck_Changed"
                            Content="Disable Update Check"
                            Unchecked="DisableUpdateCheck_Changed" />
                        <CheckBox
                            Name="ChkAutoUpdate"
                            Margin="0,0,0,0"
                            Content="Automatically download and install updates" />
                    </StackPanel>
                </Border>
                <Border
                    Margin="0,0,0,0"
                    Padding="24"
                    Background="{StaticResource SurfaceBg}"
                    BorderBrush="{StaticResource Border}"
                    BorderThickness="1"
                    CornerRadius="12">
                    <UIElement.Effect>
                        <DropShadowEffect
                            BlurRadius="8"
                            Direction="270"
                            Opacity="0.15"
                            ShadowDepth="2"
                            Color="Black" />
                    </UIElement.Effect>
                    <StackPanel>
                        <TextBlock Style="{StaticResource HeaderTxt}" Text="ADVANCED" />
                        <StackPanel Margin="0,4,0,0" Orientation="Horizontal">
                            <Button
                                MinWidth="180"
                                Click="AutoDetect_Click"
                                Content="AUTO-DETECT PATHS"
                                Style="{StaticResource SecondBtn}">
                                <FrameworkElement.ToolTip>
                                    <ToolTip Content="Automatically find Steam and GreenLuma installations" />
                                </FrameworkElement.ToolTip>
                            </Button>
                            <Button
                                MinWidth="160"
                                Margin="12,0,0,0"
                                Click="WipeData_Click"
                                Content="WIPE ALL DATA"
                                Style="{StaticResource DangerBtn}">
                                <FrameworkElement.ToolTip>
                                    <ToolTip Content="Delete all profiles, settings, and configuration" />
                                </FrameworkElement.ToolTip>
                            </Button>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
        <Border
            Grid.Row="1"
            Margin="0,0,30,24"
            Padding="18,14"
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom"
            Background="#DD0F0F0F"
            BorderBrush="{StaticResource Border}"
            BorderThickness="1"
            CornerRadius="10">
            <UIElement.Effect>
                <DropShadowEffect
                    BlurRadius="20"
                    Direction="270"
                    Opacity="0.35"
                    ShadowDepth="5"
                    Color="Black" />
            </UIElement.Effect>
            <StackPanel Orientation="Horizontal">
                <Button
                    MinWidth="120"
                    Margin="0,0,12,0"
                    Click="Cancel_Click"
                    Content="CANCEL"
                    Style="{StaticResource SecondBtn}" />
                <Button
                    MinWidth="140"
                    Click="Ok_Click"
                    Content="SAVE CHANGES"
                    Style="{StaticResource PrimaryBtn}" />
            </StackPanel>
        </Border>
    </Grid>
</Window>